(this["webpackJsonpbookshelf-app"]=this["webpackJsonpbookshelf-app"]||[]).push([[0],{13:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),c=a.n(s),r=a(23),i=a.n(r),o=a(7),l=a(11),h=a.n(l),d=a(14),u=a(15),j=a(16),b=a(8),p=a(18),O=a(17),x=a(2);a(13);var f=function(e){var t=e.tags.map((function(e){return Object(n.jsx)("div",{children:e})}));return Object(n.jsxs)("div",{className:"book",children:[Object(n.jsx)("div",{className:"book-title",children:Object(n.jsx)("a",{className:"book-url",href:e.url,target:"_blank",children:e.title})}),Object(n.jsx)("div",{className:"book-tags",children:t})]})};var g=function(e){var t=e.query,a=e.submitQuery,s=e.books.map((function(e){return Object(n.jsx)("div",{className:"bookshelf",children:Object(n.jsx)("li",{children:Object(n.jsx)(f,{title:e.title,url:e.url,tags:e.tags})})})}));return Object(n.jsxs)("div",{className:"bookshelf",children:[Object(n.jsx)("h1",{children:"Bookshelf"}),Object(n.jsx)("div",{className:"search-bar-container",children:Object(n.jsx)("input",{type:"text",id:"search-bar",placeholder:"book name, author, or any #tag! (Temp: #tag search only !)",onChange:function(e){return a(e)},value:t})}),Object(n.jsx)("div",{className:"search-results",children:Object(n.jsx)("ol",{children:s})}),Object(n.jsx)("div",{className:"open-add-book",children:Object(n.jsx)(o.a,{basename:"/bookshelf-app",children:Object(n.jsx)(o.b,{to:"/addBook",children:Object(n.jsx)("button",{children:"Add a book"})})})})]})},v=a(9),k="https://www.bookshelf.alchemist-hk.com/api",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var y={Accept:"application/json",Authorization:m},C=function(e){return fetch("".concat(k,"/book"),{method:"POST",headers:Object(v.a)(Object(v.a)({},y),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e.books}))},N=function(e){Object(p.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={title:"",url:"",tags:[],description:""},n.handleTitleChange=n.handleTitleChange.bind(Object(b.a)(n)),n.handleUrlChange=n.handleUrlChange.bind(Object(b.a)(n)),n.handleTagsChange=n.handleTagsChange.bind(Object(b.a)(n)),n.handleAddBook=n.handleAddBook.bind(Object(b.a)(n)),n.handleDescriptionChange=n.handleDescriptionChange.bind(Object(b.a)(n)),n}return Object(j.a)(a,[{key:"handleAddBook",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:this.state.title,tags:this.state.tags,url:this.state.url,description:this.state.description},e.next=3,a=[t],fetch("".concat(k,"/book/bulk"),{method:"POST",headers:Object(v.a)(Object(v.a)({},y),{},{"Content-Type":"application/json"}),body:JSON.stringify(a)}).then((function(e){return e.json()}));case 3:e.sent;case 4:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value.trim()})}},{key:"handleUrlChange",value:function(e){this.setState({url:e.target.value.trim()})}},{key:"handleTagsChange",value:function(e){var t=e.target.value.trim().split(/\s+/).filter((function(e){return e})).map((function(e){return"#"===e.charAt(0)?e:"#".concat(e)}));this.setState({tags:t}),console.log(this.state)}},{key:"handleDescriptionChange",value:function(e){this.setState({description:e.target.value.trim()})}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"add-book-container",children:[Object(n.jsx)("h1",{children:"Add a new book"}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{className:"label",children:"Title"}),Object(n.jsx)("div",{className:"input",children:Object(n.jsx)("input",{type:"text",id:"title",placeholder:"e.g Attention is all your need",onChange:this.handleTitleChange,required:!0})})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{className:"url",children:"URL"}),Object(n.jsx)("div",{className:"input",children:Object(n.jsx)("input",{type:"url",id:"url",placeholder:"e.g https://arxiv.org/pdf/1706.03762.pdf",onChange:this.handleUrlChange,required:!0})})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{className:"tags",children:"Tags"}),Object(n.jsx)("div",{className:"input",children:Object(n.jsx)("input",{type:"text",id:"tags",placeholder:"#Transformer #Attention",onChange:this.handleTagsChange,required:!0})})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{className:"description",children:"Description"}),Object(n.jsx)("div",{className:"input",children:Object(n.jsx)("input",{type:"text",id:"description",placeholder:"e.g This is for your attention~",onChange:this.handleDescriptionChange,required:!0})})]}),Object(n.jsx)("span",{children:Object(n.jsx)("div",{className:"add-button",children:Object(n.jsx)("button",{type:"submit",onClick:this.handleAddBook,children:"Add"})})})]}),Object(n.jsx)("div",{className:"open-search",children:Object(n.jsx)(o.a,{basename:"/bookshelf-app",children:Object(n.jsx)(o.b,{to:"/",children:"back to search"})})})]})}}]),a}(c.a.Component),S=function(e){Object(p.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSearch=n.handleSearch.bind(Object(b.a)(n)),n.state={books:[],searchValue:""},n}return Object(j.a)(a,[{key:"handleSearch",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n,s,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,this.setState({searchValue:a}),n={tags:[]},this.state.searchValue.includes("#")&&(s=this.state.searchValue.split(/\s+/).filter((function(e){return e})),c=s.map((function(e){return"#"===e.charAt(0)?e:"#".concat(e)})),n.tags=c),console.log(n),e.next=7,C(n);case 7:r=e.sent,this.setState((function(e){return{books:r}}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.books,s=t.searchValue;return Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(o.a,{basename:"/bookshelf-app",children:Object(n.jsx)(x.a,{exact:!0,path:"/",render:function(){return Object(n.jsx)(g,{query:s,submitQuery:e.handleSearch,books:a})}})}),Object(n.jsx)(o.a,{basename:"/bookshelf-app",children:Object(n.jsx)(x.a,{exact:!0,path:"/addBook",render:function(){return Object(n.jsx)(N,{})}})})]})}}]),a}(c.a.Component);i.a.render(Object(n.jsx)(o.a,{children:Object(n.jsx)(S,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5005fb14.chunk.js.map