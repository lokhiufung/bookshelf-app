{"version":3,"sources":["book.js","bookshelf.js","bookApi.js","addBook.js","app.js","index.js"],"names":["Book","props","tags","map","tag","className","href","url","target","title","Bookshelf","query","submitQuery","bookGrids","books","book","type","id","placeholder","onChange","event","value","basename","process","to","bookUrl","token","localStorage","Math","random","toString","substr","headers","search","bookFilter","fetch","method","body","JSON","stringify","then","res","json","data","AddBook","state","description","handleTitleChange","bind","handleUrlChange","handleTagsChange","handleAddBook","handleDescriptionChange","bookToAdd","this","bookList","setState","trim","hashtags","split","filter","charAt","console","log","required","onClick","React","Component","App","handleSearch","searchValue","includes","searchResults","exact","path","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5005fb14.chunk.js","sourcesContent":["import React from \"react\"\nimport \"./style.css\"\n\n\nfunction Book(props) {\n    const tags = props.tags.map((tag) => {\n        return (\n        <div>{tag}</div>\n        )\n    })\n    return (\n        <div className=\"book\">\n            <div className=\"book-title\"><a className=\"book-url\" href={props.url} target=\"_blank\">{props.title}</a></div>\n            <div className=\"book-tags\">{tags}</div>\n        </div>\n    )\n}\n\n\n// class Book extends React.Component {\n//     constructor(props) {\n//        super(props);\n//     }\n\n//     render() {\n//         const book = this.props\n//         return (\n//             <li>\n//                 <div className=\"book\">\n//         <div className=\"book-title\">{book.title}</div>\n//                 </div>\n//             </li>\n//         )\n//     }\n// }\n\n\nexport default Book;\n","import React from \"react\"\nimport { Link, BrowserRouter } from 'react-router-dom'\nimport Book from \"./book.js\"\nimport \"./style.css\"\n\n\nfunction Bookshelf(props) {\n\n    const {query, submitQuery, books} = props;\n    const bookGrids = books.map((book) => {\n        return (\n            <div className=\"bookshelf\">\n                <li>\n                    <Book title={book.title} url={book.url} tags={book.tags}/>\n                </li>\n            </div>\n        )\n    })\n\n    return (\n        <div className=\"bookshelf\">\n            <h1>Bookshelf</h1>\n            <div className=\"search-bar-container\">\n                <input type=\"text\" id=\"search-bar\" placeholder=\"book name, author, or any #tag! (Temp: #tag search only !)\" onChange={(event)=>submitQuery(event)} value={query}></input>\n                {/* <SearchBar submitQuery={submitQuery} query={query}/> */}\n            </div>\n\n            <div className=\"search-results\">\n                <ol>\n                    {bookGrids}\n                </ol>\n            </div>\n            <div className=\"open-add-book\">\n                <BrowserRouter basename={process.env.PUBLIC_URL}>\n                    <Link to=\"/addBook\"><button>Add a book</button></Link>\n                </BrowserRouter>\n            </div>\n        </div>\n    )\n}\n\n\nexport default Bookshelf;\n","// import dotenv from 'dotenv'\n\n// const bookUrl = \"http://localhost:8000\";\nconst bookUrl = process.env.REACT_APP_BOOK_URL;\n\nlet token = localStorage.token\nif (!token) {\n    token = localStorage.token = Math.random().toString(36).substr(-8)\n}\n\nconst headers = {\n    'Accept': 'application/json',\n    'Authorization': token\n}\n\nexport const search = (bookFilter) =>\n    fetch(`${bookUrl}/book`, {\n        method: 'POST',\n        headers: {\n            ...headers,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bookFilter)\n    }).then(res => res.json()).then(data => data.books)\n\n    \nexport const create = (bookList) =>\n    fetch(`${bookUrl}/book/bulk`, {\n        method: 'POST',\n        headers: {\n            ...headers,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bookList)\n    }).then(res => res.json())\n\n\nexport const update = (bookFilter, book) =>\n    fetch(`${bookUrl}/book`, {\n        method: 'PUT',\n        headers: {\n            ...headers,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({bookFilter, book})\n    }).then(res => res.json())\n\n\nexport const remove = (bookFilter) => \n    fetch(`${bookUrl}/book`, {\n        method: 'DELETE',\n        headers: {\n            ...headers,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({bookFilter})\n    }).then(res => res.json())","import React from \"react\"\nimport { Link, BrowserRouter } from 'react-router-dom'\nimport {create} from \"./bookApi.js\"\nimport \"./style.css\"\n\n\nclass AddBook extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            title: \"\",\n            url: \"\",\n            tags: [],\n            description: \"\",\n        }\n        this.handleTitleChange = this.handleTitleChange.bind(this);\n        this.handleUrlChange = this.handleUrlChange.bind(this);\n        this.handleTagsChange = this.handleTagsChange.bind(this);\n        this.handleAddBook = this.handleAddBook.bind(this);\n        this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n    }\n\n    async handleAddBook() {\n\n        const bookToAdd = {\n            title: this.state.title,\n            tags: this.state.tags,\n            url: this.state.url,\n            description: this.state.description,\n        }\n        const addBookResults = await create([bookToAdd]);\n\t}\n\n    handleTitleChange(event) {\n        this.setState({title: event.target.value.trim()})\n    }\n\n    handleUrlChange(event) {\n        this.setState({url: event.target.value.trim()})\n    }\n\n    handleTagsChange(event) {\n        const tags = event.target.value.trim().split(/\\s+/).filter(tag => tag);\n        const hashtags = tags.map(tag => (tag.charAt(0) === \"#\") ? tag:`#${tag}`);\n        this.setState({tags: hashtags})\n        console.log(this.state)\n    }\n\n    handleDescriptionChange(event) {\n        this.setState({description: event.target.value.trim()})\n    }\n\n    render() {\n        return (\n            <div className=\"add-book-container\">\n                <h1>Add a new book</h1>\n                <form>\n                    <span>\n                        <div className=\"label\">Title</div>\n                        <div className=\"input\">\n                            <input type=\"text\" id=\"title\" placeholder=\"e.g Attention is all your need\" onChange={this.handleTitleChange} required></input>\n                        </div>\n                    </span>\n                    <span>\n                        <div className=\"url\">URL</div>\n                        <div className=\"input\">\n                            <input type=\"url\" id=\"url\" placeholder=\"e.g https://arxiv.org/pdf/1706.03762.pdf\" onChange={this.handleUrlChange} required></input>\n                        </div>\n                    </span>\n                    <span>\n                        <div className=\"tags\">Tags</div>\n                        <div className=\"input\">\n                            <input type=\"text\" id=\"tags\" placeholder=\"#Transformer #Attention\" onChange={this.handleTagsChange} required></input>\n                        </div> \n                    </span>\n                    <span>\n                        <div className=\"description\">Description</div>\n                        <div className=\"input\">\n                            <input type=\"text\" id=\"description\" placeholder=\"e.g This is for your attention~\" onChange={this.handleDescriptionChange} required></input>\n                        </div> \n                    </span>\n                    <span>\n                        <div className=\"add-button\">\n                            <button type=\"submit\" onClick={this.handleAddBook}>Add</button>\n                        </div>\n                    </span>\n                </form>\n                <div className=\"open-search\">\n                    <BrowserRouter basename={process.env.PUBLIC_URL}>\n                        <Link to=\"/\">back to search</Link>\n                    </BrowserRouter>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default AddBook;\n","import React from \"react\"\n// import Container from '@material-ui/core/Container';\nimport { Route, BrowserRouter } from 'react-router-dom'\n\n// import SearchBar from \"./searchBar.js\"\nimport Bookshelf from \"./bookshelf.js\"\nimport AddBook from \"./addBook.js\"\nimport {search} from \"./bookApi.js\"\n\nimport \"./style.css\"\n\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleSearch = this.handleSearch.bind(this);\n\t\t// this.handleAddBook = this.handleAddBook.bind(this);\n\t\tthis.state = {\n\t\t\tbooks: [],\n\t\t\tsearchValue: \"\"\n\t\t}\n\t}\n\t\n\tasync handleSearch(event) {\n\n\t\tconst searchValue = event.target.value;\n\t\tthis.setState({searchValue: searchValue});\n\t\t// temp: tags search only\n\t\tlet bookFilter = {\n\t\t\ttags: [],\n\t\t}\n\t\tif (this.state.searchValue.includes(\"#\")) {\n\t\t\tconst tags = this.state.searchValue.split(/\\s+/).filter(tag => tag);\n\t\t\tconst hashtags = tags.map(tag => (tag.charAt(0) === \"#\") ? tag:`#${tag}`);\n\t\t\tbookFilter.tags = hashtags;\n\t\t}\n\t\tconsole.log(bookFilter);\n\t\t\n\t\tconst searchResults = await search(bookFilter);\n\t\t// console.log(searchResults);\n\t\tthis.setState((state) => ({books: searchResults}));\n\t}\n\n\t// async handleAddBook(event) {\n\t// \tconst bookToAdd = event.target.value;\n\n\t// \tconsole.log(bookToAdd);\n\t// \t// const addBookResults = await create(bookToAdd);\n\t// }\n\n\trender() {\n\t\t// console.log(this.state);\n\t\tconst {books, searchValue} = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"app\">\n\t\t\t\t{/* <h1>Book Shelf</h1> */}\n\t\t\t\t<BrowserRouter basename={process.env.PUBLIC_URL}>\n\t\t\t\t\t<Route exact path=\"/\" render={()=>(\n\t\t\t\t\t\t// <SearchBar query={searchValue} ={this.handleSearch}/>\n\t\t\t\t\t\t<Bookshelf query={searchValue} submitQuery={this.handleSearch} books={books}/>\n\t\t\t\t\t)}/>\n\t\t\t\t</BrowserRouter>\n\t\t\t\t<BrowserRouter basename={process.env.PUBLIC_URL}>\n\t\t\t\t\t<Route exact path=\"/addBook\" render={()=>(\n\t\t\t\t\t\t// <SearchBar query={searchValue} ={this.handleSearch}/>\n\t\t\t\t\t\t<AddBook />\n\t\t\t\t\t)}/>\n\t\t\t\t</BrowserRouter>\n\t\t\t</div>\n\t\t)\n\t\t\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './app';\n\n\nReactDOM.render(\n    <BrowserRouter><App /></BrowserRouter>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}